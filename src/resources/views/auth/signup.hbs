<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dalziel</title>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/fonts/css/all.min.css">

</head> 
<body>
     {{!-- login/resinger  --}}
         <div class="modal">
            <div class="modal__overlay">
            </div>
            <div class="modal__body">

                 {{!-- resinger form   --}}
                 <div class="auth-form">
                    <div class="auth-form__container">
                        <div class="container d-flex"  style="align-items: center;text-align: center;margin-bottom:16px">
                            <a href="/" class="auth-link-home" style="text-decoration: none;">
                                <i class="fa-solid fa-bag-shopping" style="color: #fe6433; font-size:48px"></i>
                                <h1 class="auth-header" style="color: #fe6433;">Dalziel</h1>
                            </a>                   
                        </div>
                        <div class="auth-form-form">
                            <div class="auth-form__header">
                                <h3 class="auth-form__heading">
                                    Đăng ký
                                </h3>
                                <a href="/auth/login" class="auth-link para-text">
                                    <span class="auth-form__switch-btn">Đăng nhập</span>
                                </a>
                            </div>
                        </div>
                        <form id="authFormSign" >
                            <div class="auth-form__form">
                                    <div class="auth-form__group">
                                        <input id="emailSignup" class="auth-form__input" value=""  type="text"  name="username" placeholder="Tên đăng nhập" size="30" >
                                    </div>
                                    <div class="auth-form__group">
                                        <input id="passwordSignup1" class="auth-form__input paswordInput" name="password" placeholder="Mật khẩu" type="password">
                                    </div>
                                <div class="auth-form__group">
                                    <input id="passwordSignup2" class="auth-form__input paswordInput" placeholder="Nhập lại mật khẩu"type="password">
                                </div>
                            </div>
        
                            <div class="auth-form__aside">
                                <p class="auth-form__policy-text">
                                    Bằng việc đăng ký, bạn đã đồng ý với Dalziel về
                                    <a href="" class="auth-form__policy-link para-text">Điều khoản dịch vụ</a>
                                    &
                                    <a href="" class="auth-form__policy-link para-text">Chính cách bảo mật</a>
                                </p>
                            </div>
                            <div class="auth-form__controls">
                                <a id="goBack" onclick="goback()" class="btn btn--normal auth-form__controls--back" style="color: black" type="submit">Trở lại</a>
                                <button class="btn btn--primary para-text"id="signup">Đăng ký</button>
                            </div>
                        </form>
                    </div>
    
                    <div class="auth-form__socials">
                        <a href="http://facebook.com" class="para-text btn auth-form__socials--facebook btn--size-s btn--with-icon">
                            <i class="fa-brands fa-facebook auth-form__socials-icon"></i>
                            <span class="auth-form__socials--title">
                                Kết nối với facebook    
                            </span>
                        </a>
                        <a href="http://google.com" class="para-text auth-form__socials--google btn btn--size-s btn--with-icon">
                            <i class="fa-brands fa-google auth-form__socials-icon"></i>
                            <span class="auth-form__socials--title">
                                Kết nối với google    
                            </span>
                        </a>
                    </div>
                </div> 
</body>
</html>

<script>
    function goback(){
        location.replace("/");
    }
</script>

<script>
    let passwordSignup1 = document.getElementById("passwordSignup1");
    let passwordSignup2 = document.getElementById("passwordSignup2");
    let signup = document.getElementById("signup");
    let emailSignup = document.getElementById("emailSignup");
    let hasClass=false;
    emailSignup.addEventListener("keyup", function(e) {

        if(emailSignup.value.length<6||emailSignup.value.length>30){
            signup.classList.remove("btn--primary");
            signup.classList.add("error");
        }
        else{
            signup.classList.add("btn--primary");
            signup.classList.remove("error");
        }
        hasClass=signup.classList.contains("error");
    })
    
    signup.addEventListener("click", function(e) {
        if(passwordSignup1.value === passwordSignup2.value && passwordSignup1.value &&passwordSignup2.value&&!hasClass){
            {{!-- console.log("true"); --}}
            let authFormSign = document.getElementById("authFormSign");
            authFormSign.action = '/auth/signup'  + '?_method=POST'
            authFormSign.submit()
        }
        else{
            {{!-- console.log("false"); --}}
        }
    })
</script>

<style>
    .error{
        background-color: rgb(119, 109, 109);
        cursor: default;
    }
    .error:hover{
        opacity: 1;
    }
</style>