<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dalziel</title>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/fonts/css/all.min.css">
</head>
<body>

        {{!-- login form  --}}
    <div class="modal">
        <div class="modal__overlay"></div>
        <div class="modal__body">
            <div class="auth-form">
                <div class="auth-form__container">
                    <div class="container d-flex"  style="align-items: center;text-align: center;margin-bottom:16px">
                        <a href="/" class="auth-link-home" style="text-decoration: none;">
                                <i class="fa-solid fa-bag-shopping" style="color: #fe6433; font-size:48px"></i>
                                <h1 class="auth-header" style="color: #fe6433;">Dalziel</h1>
                        </a>                   
                     </div>
                    <div class="auth-form-form">
                        <div class="auth-form__header">
                            <h3 class="auth-form__heading">
                                Đăng nhập
                            </h3>
                            <a href="/auth/signup" class="auth-link hover">
                                <span class="auth-form__switch-btn">Đăng ký</span>
                            </a>
                        </div>
                    </div>
                    <form id="formLogin" method="post" action="/auth/login">
                        <div class="auth-form__form">
                            <div class="auth-form__group">
                                <input id="username"name="username" type="text" class="auth-form__input" placeholder="Email/Số điện thoại">
                            </div>
                            <div class="auth-form__group"  style="position:relative">
                                <input id="password" name="password" type="password" class="auth-form__input" placeholder="Mật khẩu">
                                <span style="padding: 2px;cursor: pointer;position:absolute; top:50%; right:4%;font-size:16px"><i id="show-btn"class="far fa-eye"></i></span>

                            </div>
                                    <script>
                                        const passField = document.getElementById("password");
                                        const showBtn = document.getElementById("show-btn");
                                        showBtn.onclick = (()=>{
                                            if(passField.type === "password"){
                                                passField.type = "text";
                                                showBtn.classList.toggle("fa-eye");
                                                showBtn.classList.toggle("fa-eye-slash");
                                            }else{
                                                passField.type = "password";
                                                showBtn.classList.toggle("fa-eye");
                                                showBtn.classList.toggle("fa-eye-slash");
                                            }
                                        });
                                    </script>
                        </div>
                        <div class="auth-form__aside">
                            <div class="auth-form__help">
                                <a href="" class="auth-form__help--link hover">Quên mật khẩu</a>
                                <span class="auth-form__helt-separate"></span>
                                <a href="" class="auth-form__help--link hover">Cần trợ giúp?</a>
                            </div>
                        </div>
                        <div id="auth-form__logindefault">

                        </div>
                        <div class="auth-form__controls">
                            <a id="goBack" onclick="goback()" class="btn btn--normal auth-form__controls--back" style="color: black" type="submit">Trở lại</a>
                            <button id="login" class="btn btn--primary hover">Đăng nhập</button>
                        </div>
                    </form>

                </div>
                <div class="auth-form__socials">
                    <a href="http://facebook.com" class="hover btn auth-form__socials--facebook btn--size-s btn--with-icon">
                        <i class="fa-brands fa-facebook auth-form__socials-icon"></i>
                        <span class="auth-form__socials--title">
                            Kết nối với facebook    
                        </span>
                    </a>
                    <a href="http://mail.google.com" class="hover auth-form__socials--google btn btn--size-s btn--with-icon">
                        <i class="fa-brands fa-google auth-form__socials-icon" style=""></i>
                        <span class="auth-form__socials--title">
                            Kết nối với google    
                        </span>
                    </a>
                </div>
            </div> 
        </div>
    </div>
</body>
</html>

<script>
    function goback(){
        history.go(-1)
    }
</script>
<link rel="stylesheet" href="../fonts/css/all.min.css">
<script src="/js/jquery-3.6.0.min.js"></script>
{{!-- <script>
    function setCookie(cname, cvalue, exdays) {
            const d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            let expires = "expires="+d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }

        function getCookie(cname) {
            let name = cname + "=";
            let ca = document.cookie.split(';');
            for(let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function checkCookie() {
            let user = getCookie("username");
            if (user != "") {
                alert("Welcome again " + user);
            } else {
                user = prompt("Please enter your name:", "");
                if (user != "" && user != null) {
                setCookie("username", user, 365);
                }
            }
        }

        
    let formLogin = $("#formLogin").on("submit",function(e) {
        $.ajax({
                url:"/auth/login",
                type: "POST",
                data:{
                    username:$("#username").val(),
                    password:$("#password").val()
                }
        }).then(data =>{
            console.log(data);
            setCookie("token",data.token, 1)
        }).catch(err=>{
            console.log(err)
        })
    })
    console.log(formLogin)
    function login() {
        $.ajax({
                url:"/auth/login",
                type: "POST",
                data:{
                    username:$("#username").val(),
                    password:$("#password").val()
                }
        }).then(data =>{
            console.log(data);
            setCookie("token",data.token, 1)
        }).catch(err=>{
            console.log(err)
        })
    }
</script> --}}
<style>
    .auth-form__controls{
        margin-top: 20px;
        display: flex;
        justify-content: flex-end;
    }
    #auth-form__logindefault{
        margin: 10px 0 50px;

    }
</style>
<script>
    let checkLogin=document.getElementById("auth-form__logindefault")
    if({{loginFalied}}){
        
        checkLogin.innerHTML = `<span style="color:red; margin:25px; font-size:1.4rem"><i class="fa-solid fa-xmark"style="color:red"></i> Thông tin tài khoản hoặc mật khẩu không chinh xác</span>`

    }
</script>
